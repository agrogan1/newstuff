<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<style>
/* CSS for Markstat 2.0 using Pandoc 2.0 */
body{padding:14px 28px;}
body, table {font-family: Helvetica, Arial, Sans-serif; font-size: 14px;}
h1, h2, h3, h4 {font-weight: normal; color: #3366cc}
h1 {font-size: 200%;}
h2 {font-size: 150%;}
h3 {font-size: 120%;}
h4 {font-size: 100%; font-weight:bold}
img.center {display:block; margin-left:auto; margin-right:auto}
.small{font-size:8pt;}
a {color: black;}
a:visited {color: #808080;}
a.plain {text-decoration:none;}
a.plain:hover {text-decoration:underline;}
.em {font-weight:bold;}
pre, code {font-family: "lucida console", monospace;}
pre.stata {font-size:13px; line-height:13px;}
pre {padding:8px; border:1px solid #c0c0c0; border-radius:8px; background-color:#fdfdfd;}
code {color:#3366cc; background-color:#fafafa;}
pre code { color:black; background-color:white}
/* Added for Pandoc */
figure > img, div.figure > img {display:block; margin:auto}
figcaption, p.caption {text-align:center; font-weight:bold; color:#3366cc;}
h1.title {text-align:center; margin-bottom:0}
p.author, h2.author {font-style:italic; text-align:center;margin-top:4px;margin-bottom:0}
p.date, h3.date {text-align:center;margin-top:4px; margin-bottom:0}
/* Tables*/
table { margin:auto; border-collapse:collapse; }
table caption { margin-bottom:1ex;}
th, td { padding:4px 6px;}
thead tr:first-child th {border-top:1px solid black; padding-top:6px}
thead tr:last-child  th {padding-bottom:6px}
tbody tr:first-child td {border-top:1px solid black; padding-top:6px}
tbody tr:last-child  td {padding-bottom:6px;}
table tbody:last-child tr:last-child td {border-bottom:1px solid black;}
</style>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Andy Grogan-Kaylor" />
  <title>A Review of Descriptive Statistics, OLS and an Introduction to Stata</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">A Review of Descriptive Statistics, OLS and an Introduction to Stata</h1>
<p class="author">Andy Grogan-Kaylor</p>
<p class="date">22 Aug 2021</p>
</header>
<h1 id="social-service-agency-data">Social Service Agency Data</h1>
<style>body {max-width: 90%} h1 {color: black;} h2 {color: black} blockquote {border-left: 5px solid #EC1F27; margin: 1.5em 10px; padding: 0.5em 10px;}</style>
<blockquote>
<p>Simulated data on social service clients</p>
</blockquote>
<pre class='stata'>. use clients.dta, clear // use (get) the data
(Simulated Clients)
</pre>
<pre class='stata'>. describe

Contains data from clients.dta
 Observations:           521                  Simulated Clients
    Variables:             8                  3 Jun 2020 15:14
──────────────────────────────────────────────────────────────────────────────────────────────
Variable      Storage   Display    Value
    name         type    format    label      Variable label
──────────────────────────────────────────────────────────────────────────────────────────────
ID              double  %9.0g                 ID
age             double  %9.0g                 age
gender          long    %9.0g      gender     gender
program         long    %9.0g      program    program
mental_health~1 double  %9.0g                 mental_health_T1
mental_health~2 double  %9.0g                 mental_health_T2
latitude        double  %9.0g                 latitude
longitude       double  %9.0g                 longitude
──────────────────────────────────────────────────────────────────────────────────────────────
Sorted by: 
</pre>
<h1 id="one-line-stata">One Line Stata</h1>
<p><code>do_something to_variable(s), options</code></p>
<blockquote>
<p>Quite often the default options are so well chosen that you do not need to specify any options.</p>
</blockquote>
<ul>
<li><code>use mydata.dta</code></li>
<li><code>summarize</code> // descriptive statistics</li>
<li><code>keep x1 x2 x3</code> // keep only selected variables</li>
<li><code>list x1 x2 x3 in 1/10</code> // list cases for selected variables</li>
<li><code>browse</code> // look at data</li>
<li><code>lookfor [word]</code> // look for variables with a particular word</li>
</ul>
<h1 id="the-stata-interface">The Stata Interface</h1>
<figure>
<img src="Slide1.png" alt="The Stata Interface" /><figcaption aria-hidden="true">The Stata Interface</figcaption>
</figure>
<h1 id="measures-of-central-tendency">Measures of Central Tendency</h1>
<ul>
<li>What are <em>mean</em> and <em>median</em>. Why are they different?</li>
<li>Where is standard deviation?</li>
<li>Subsets of variables?</li>
<li>Finding variables?</li>
</ul>
<pre class='stata'>. summarize 

    Variable │        Obs        Mean    Std. dev.       Min        Max
─────────────┼─────────────────────────────────────────────────────────
          ID │        521    2965.449     1158.32       1005       4989
         age │        521     28.0438    7.047373   18.05584   45.45653
      gender │        521    1.821497    .7549825          1          3
     program │        521    2.197697    .7973963          1          4
mental_hea~1 │        521    95.11707    5.161698   80.93709   108.5736
─────────────┼─────────────────────────────────────────────────────────
mental_hea~2 │        521    98.87066    7.423767   79.57518   118.2272
    latitude │        521    42.25321    .1027698   41.99847    42.6237
   longitude │        521   -83.74921    .0987047  -84.04328  -83.42666
</pre>
<pre class='stata'>. summarize age, detail

                             age
─────────────────────────────────────────────────────────────
      Percentiles      Smallest
 1%     18.17739       18.05584
 5%     18.72159       18.05992
10%     19.54324       18.10945       Obs                 521
25%     22.37428       18.13374       Sum of wgt.         521

50%     26.61352                      Mean            28.0438
                        Largest       Std. dev.      7.047373
75%     32.88188       44.35607
90%     38.46387       44.78399       Variance       49.66547
95%     41.26977       45.30344       Skewness       .5501433
99%     44.16425       45.45653       Kurtosis       2.317297
</pre>
<h1 id="measures-of-variation">Measures of Variation</h1>
<blockquote>
<p>Some programs, e.g. <em>R</em> make you search for standard deviation. With Stata, <em>sd</em> is easily accessible with <code>summarize</code>.</p>
</blockquote>
<pre class='stata'>. histogram mental_health_T1, normal scheme(burd)
(bin=22, start=80.937087, width=1.2562034)
</pre>
<pre class='stata'>. graph export myhistogram.png, width(500) replace
file
    /Users/agrogan/Desktop/GitHub/newstuff/categorical/review-stats-intro-stata/myhistogram.
    > png saved as PNG format
</pre>
<figure>
<img src="myhistogram.png" alt="histogram of mental health" /><figcaption aria-hidden="true">histogram of mental health</figcaption>
</figure>
<h1 id="comparing-continuous-and-continuous-variables">Comparing Continuous and Continuous Variables</h1>
<pre class='stata'>. twoway scatter mental_health_T1 age, msymbol(o) scheme(burd)
</pre>
<pre class='stata'>. graph export myscatter.png, width(500) replace
file
    /Users/agrogan/Desktop/GitHub/newstuff/categorical/review-stats-intro-stata/myscatter.pn
    > g saved as PNG format
</pre>
<figure>
<img src="myscatter.png" alt="scatterplot of age and mental health" /><figcaption aria-hidden="true">scatterplot of age and mental health</figcaption>
</figure>
<h2 id="correlation">Correlation</h2>
<pre class='stata'>. pwcorr mental_health_T1 age, sig

             │ mental~1      age
─────────────┼──────────────────
mental_hea~1 │   1.0000 
             │
             │
         age │  -0.0093   1.0000 
             │   0.8329
             │
</pre>
<h1 id="comparing-continuous-variables-across-categorical-variables">Comparing Continuous Variables Across Categorical Variables</h1>
<pre class='stata'>. graph bar mental_health_T2, over(program) scheme(burd)
</pre>
<pre class='stata'>. graph export mybargraph.png, width(500) replace
file
    /Users/agrogan/Desktop/GitHub/newstuff/categorical/review-stats-intro-stata/mybargraph.p
    > ng saved as PNG format
</pre>
<figure>
<img src="mybargraph.png" alt="bar graph of mental health at time 2" /><figcaption aria-hidden="true">bar graph of mental health at time 2</figcaption>
</figure>
<h2 id="t-test">t-test</h2>
<pre class='stata'>. preserve // preserve data set
</pre>
<pre class='stata'>. keep if program == 1 | program == 2 // only keep 2 programs for now
(201 observations deleted)
</pre>
<pre class='stata'>. ttest mental_health_T2, by(program)

Two-sample t test with equal variances
─────────┬────────────────────────────────────────────────────────────────────
   Group │     Obs        Mean    Std. err.   Std. dev.   [95% conf. interval]
─────────┼────────────────────────────────────────────────────────────────────
 Program │     111     94.7963    .4969934     5.23615    93.81138    95.78123
 Program │     209    105.3512    .3562424    5.150136    104.6489    106.0535
─────────┼────────────────────────────────────────────────────────────────────
Combined │     320      101.69    .4033737    7.215767    100.8964    102.4836
─────────┼────────────────────────────────────────────────────────────────────
    diff │           -10.55491    .6083793               -11.75187   -9.357953
─────────┴────────────────────────────────────────────────────────────────────
    diff = mean(Program) - mean(Program)                          t = -17.3492
H0: diff = 0                                     Degrees of freedom =      318

    Ha: diff &lt; 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T &lt; t) = 0.0000         Pr(|T| > |t|) = 0.0000          Pr(T > t) = 1.0000
</pre>
<h2 id="anova">ANOVA</h2>
<pre class='stata'>. restore // restore old version of data
</pre>
<pre class='stata'>. oneway mental_health_T2 program, tabulate // oneway analysis of variance

            │     Summary of mental_health_T2
    program │        Mean   Std. dev.       Freq.
────────────┼────────────────────────────────────
  Program A │   94.796305   5.2361502         111
  Program B │   105.35121   5.1501362         209
  Program C │   94.299149   5.2002254         188
  Program D │   95.582917   5.6199143          13
────────────┼────────────────────────────────────
      Total │   98.870656   7.4237673         521

                        Analysis of variance
    Source              SS         df      MS            F     Prob > F
────────────────────────────────────────────────────────────────────────
Between groups      14689.6155      3   4896.53849    181.23     0.0000
 Within groups       13968.791    517   27.0189382
────────────────────────────────────────────────────────────────────────
    Total           28658.4065    520   55.1123202

Bartlett's equal-variances test: chi2(3) =   0.1991    Prob>chi2 = 0.978
</pre>
<blockquote>
<p>Importantly, <code>,tabulate</code> gives us a table of results.</p>
</blockquote>
<h1 id="regression">Regression</h1>
<ul>
<li>What is the equation?</li>
<li>What do the results mean?</li>
<li>What is substantively or statistically significant?</li>
</ul>
<pre class='stata'>. regress mental_health_T2 mental_health_T1 i.program

      Source │       SS           df       MS      Number of obs   =       521
─────────────┼──────────────────────────────────   F(4, 516)       =    135.94
       Model │  14704.3725         4  3676.09313   Prob > F        =    0.0000
    Residual │   13954.034       516  27.0427015   R-squared       =    0.5131
─────────────┼──────────────────────────────────   Adj R-squared   =    0.5093
       Total │  28658.4065       520  55.1123202   Root MSE        =    5.2003

─────────────────┬────────────────────────────────────────────────────────────────
mental_health_T2 │ Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
─────────────────┼────────────────────────────────────────────────────────────────
mental_health_T1 │  -.0327405    .044321    -0.74   0.460    -.1198123    .0543314
                 │
         program │
      Program B  │   10.57171   .6111758    17.30   0.000     9.371008    11.77241
      Program C  │   -.494409   .6224837    -0.79   0.427    -1.717323     .728505
      Program D  │   .7226213   1.526873     0.47   0.636     -2.27703    3.722272
                 │
           _cons │   97.90435   4.236239    23.11   0.000     89.58195    106.2267
─────────────────┴────────────────────────────────────────────────────────────────
</pre>
<h1 id="what-if-we-want-to-allow-for-different-slopes">What if We Want to Allow For Different Slopes?</h1>
<blockquote>
<p>Instructor will draw this out.</p>
</blockquote>
<pre class='stata'>. regress mental_health_T2 c.mental_health_T1##i.program

      Source │       SS           df       MS      Number of obs   =       521
─────────────┼──────────────────────────────────   F(7, 513)       =     77.65
       Model │  14743.6327         7  2106.23324   Prob > F        =    0.0000
    Residual │  13914.7738       513  27.1243155   R-squared       =    0.5145
─────────────┼──────────────────────────────────   Adj R-squared   =    0.5078
       Total │  28658.4065       520  55.1123202   Root MSE        =    5.2081

───────────────────────────┬────────────────────────────────────────────────────────────────
          mental_health_T2 │ Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
───────────────────────────┼────────────────────────────────────────────────────────────────
          mental_health_T1 │   .0038108   .0940124     0.04   0.968    -.1808858    .1885074
                           │
                   program │
                Program B  │   14.13882   11.07298     1.28   0.202    -7.615155    35.89279
                Program C  │   2.227825    11.6862     0.19   0.849    -20.73087    25.18653
                Program D  │   27.30439    22.3002     1.22   0.221    -16.50657    71.11535
                           │
program#c.mental_health_T1 │
                Program B  │  -.0375708   .1162481    -0.32   0.747    -.2659517    .1908101
                Program C  │  -.0286832   .1228833    -0.23   0.816    -.2700997    .2127332
                Program D  │  -.2851331   .2385022    -1.20   0.232    -.7536944    .1834281
                           │
                     _cons │   94.43455   8.938253    10.57   0.000     76.87446    111.9946
───────────────────────────┴────────────────────────────────────────────────────────────────
</pre>
<h1 id="regression-assumptions-and-the-issue-of-normality">Regression Assumptions and the Issue of “Normality”</h1>
<h1 id="questions">Questions?</h1>
</body>
</html>
