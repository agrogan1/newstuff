<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<style>
/* CSS for Markstat 2.0 using Pandoc 2.0 */
body{padding:14px 28px;}
body, table {font-family: Helvetica, Arial, Sans-serif; font-size: 14px;}
h1, h2, h3, h4 {font-weight: normal; color: #3366cc}
h1 {font-size: 200%;}
h2 {font-size: 150%;}
h3 {font-size: 120%;}
h4 {font-size: 100%; font-weight:bold}
img.center {display:block; margin-left:auto; margin-right:auto}
.small{font-size:8pt;}
a {color: black;}
a:visited {color: #808080;}
a.plain {text-decoration:none;}
a.plain:hover {text-decoration:underline;}
.em {font-weight:bold;}
pre, code {font-family: "lucida console", monospace;}
pre.stata {font-size:13px; line-height:13px;}
pre {padding:8px; border:1px solid #c0c0c0; border-radius:8px; background-color:#fdfdfd;}
code {color:#3366cc; background-color:#fafafa;}
pre code { color:black; background-color:white}
/* Added for Pandoc */
figure > img, div.figure > img {display:block; margin:auto}
figcaption, p.caption {text-align:center; font-weight:bold; color:#3366cc;}
h1.title {text-align:center; margin-bottom:0}
p.author, h2.author {font-style:italic; text-align:center;margin-top:4px;margin-bottom:0}
p.date, h3.date {text-align:center;margin-top:4px; margin-bottom:0}
/* Tables*/
table { margin:auto; border-collapse:collapse; }
table caption { margin-bottom:1ex;}
th, td { padding:4px 6px;}
thead tr:first-child th {border-top:1px solid black; padding-top:6px}
thead tr:last-child  th {padding-bottom:6px}
tbody tr:first-child td {border-top:1px solid black; padding-top:6px}
tbody tr:last-child  td {padding-bottom:6px;}
table tbody:last-child tr:last-child td {border-bottom:1px solid black;}
</style>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Andy Grogan-Kaylor" />
  <title>Count Regression</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Count Regression</h1>
<p class="author">Andy Grogan-Kaylor</p>
<p class="date">27 May 2020</p>
</header>
<h1 id="key-concepts-and-commands">Key Concepts and Commands</h1>
<style>h1 {color: #00274C;} h2 {color: #2F65A7} blockquote {border-left: 5px solid #ffcb05; margin: 1.5em 10px; padding: 0.5em 10px;}</style>
<ul>
<li>formulas are our friends</li>
</ul>
<p><span class="math inline">\(F(y) = \beta_0 + \beta_1 x_1 + ...\)</span></p>
<p><span class="math inline">\(y = \ln(count): 1, 2, 3, \text{etc.}\)</span></p>
<ul>
<li><p>Think about ORâ€™s, pred. prob., non-linearity</p></li>
<li><p>So much of categorical data analysis depends upon arguments for â€œfunctional formâ€. When do we think these arguments are valid?</p></li>
</ul>
<h1 id="the-count">The Count</h1>
<figure>
<img src="../images/Sesame-Street-optimize.gif" alt="The Count and Friends" style="width:20.0%" /><figcaption>The Count and Friends</figcaption>
</figure>
<h1 id="historical-examples-of-count-data-r.1-r.2-r.3">Historical Examples of Count Data ğŸ´ â˜ï¸ ğŸ¥</h1>
<ul>
<li>ğŸ´ Deaths from horsekicks in the Prussian Army</li>
<li>â˜ï¸ Calls to a call center (business, crisis hotline, etc.)</li>
<li>ğŸ¥ Arrivals at the Emergency Room</li>
</ul>
<h1 id="other-canonical-examples-of-count-data-r.7-r.8">Other Canonical Examples of Count Data ğŸŒ´ ğŸ¤’</h1>
<ul>
<li>ğŸŒ° ğŸŒ´ ğŸŒµ Plants / trees in a field</li>
<li>ğŸ’‰ ğŸ¤¢ ğŸ˜· Cases of disease / unit area</li>
</ul>
<h1 id="poisson-distribution">Poisson Distribution</h1>
<h2 id="theorizing-about-the-poisson-r.15-r.16-r.17-r.18-r.19-r.20">Theorizing about the Poisson ğŸŸ ğŸŸ ğŸŸ ğŸŒ´ ğŸŒ² ğŸŒ³</h2>
<blockquote>
<p>The Poisson distribution is a modified form of the binomial distribution that is useful for the analysis of phenomena characterized by discrete, rare events. For example, in a study of the distribution of a rare plant among a number of quadrats, a majority of plots may contain no specimens, a smaller number a single plant, and still smaller numbers two, three, or more plants. If a single plant per quadrat is expected, the mean Âµ = 1 and the â€œ0â€ and â€œ1â€ classes occur at 37% each, the â€œ2â€ class at 18%, the â€œ3â€ class at 6%, and larger classes take up the remaining 2%. The characteristic test for a Poisson is that the variance equals the mean, which in the plant example means that the rare plant is randomly distributed. Note, that, In the distributions above, as the mean Âµ increases towards 10, the distribution approaches normality.</p>
</blockquote>
<blockquote>
<p>The Poisson may be used to evaluate whether events occur independently in time as well as space. In a classic example, Bortkiewicz (1898) studied the distribution of 122 men kicked to death by horses among ten Prussian army corps over 20 years. In most years in most corps, no one dies from being kicked; in one corp in one year, four men were kicked to death. Does this mean something was amiss in this particular corp? Analysis indicates that the observed frequencies conform quite closely to the expected Poisson frequencies, and that the mean and variance are almost identical, as expected. The corp was just â€œunluckyâ€ in the sense that it is in the extreme tail of an ordinary run of events.</p>
</blockquote>
<p>http://www.mun.ca/biology/scarr/smcPoisson_distributions.html</p>
<h2 id="reprise-of-normal-distribution">Reprise of Normal Distribution</h2>
<p>Normal distribution:</p>
<p><span class="math display">\[
    P(x) = \frac{1}{\sigma \sqrt{2 \pi}} e^{-(x-\mu)^2/(2 \sigma^2)}
\]</span></p>
<p>Standardized Normal Distribution:</p>
<p><span class="math display">\[
    P(z) = \frac{1}{\sqrt{2 \pi}} e^{-z^2/2}
\]</span></p>
<p>2 parameters:</p>
<p><span class="math display">\[
    x \sim N(\mu,\sigma)
\]</span></p>
<pre class='stata'>. clear all // clear all for simulated data
</pre>
<pre class='stata'>. set obs 1000 // number of observations
number of observations (_N) was 0, now 1,000
</pre>
<pre class='stata'>. generate x = rnormal() // normally distributed random variable
</pre>
<pre class='stata'>. histogram x, title("Normally Distributed Random Variable") scheme(burd)
(bin=29, start=-3.1595924, width=.22075173)
</pre>
<pre class='stata'>. graph export myhistogram.png, width(500) replace
(file myhistogram.png written in PNG format)
</pre>
<figure>
<img src="myhistogram.png" alt="histogram of random normal variable" /><figcaption>histogram of random normal variable</figcaption>
</figure>
<h2 id="poisson-distribution-1">Poisson Distribution</h2>
<p><span class="math display">\[
    P(Y=y) = e^{-\lambda} \frac{\lambda^y}{y!}
\]</span></p>
<blockquote>
<p><span style="background-color: #FFFF00">A Poisson with large lambda looks very similar to a normal distribution.</span></p>
</blockquote>
<pre class='stata'>. generate w = rpoisson(.5)
</pre>
<pre class='stata'>. histogram w, title("Poisson Distributed Random Variable") scheme(burd)
(bin=29, start=0, width=.13793103)
</pre>
<pre class='stata'>. graph export myhistogram2.png, width(500) replace
(file myhistogram2.png written in PNG format)
</pre>
<figure>
<img src="myhistogram2.png" alt="histogram of random Poisson variable" /><figcaption>histogram of random Poisson variable</figcaption>
</figure>
<p><span class="math display">\[ 
    x \sim Poisson(\lambda)
\]</span></p>
<blockquote>
<p><span class="math inline">\(\lambda\)</span> is both mean and variance.</p>
</blockquote>
<pre class='stata'>. clear all
</pre>
<pre class='stata'>. set obs 20
number of observations (_N) was 0, now 20
</pre>
<pre class='stata'>. generate field = _n // field number
</pre>
<pre class='stata'>. generate mycount = rpoisson(1)
</pre>
<pre class='stata'>. expand mycount // create individual observations
(8 zero counts ignored; observations not deleted)
(13 observations created)
</pre>
<pre class='stata'>. generate x = runiform(1,10) // random x coordinate
</pre>
<pre class='stata'>. generate y =runiform(1,10) // random y coordinate
</pre>
<pre class='stata'>. generate mylabel = "ğŸ¦†"
</pre>
<pre class='stata'>. twoway scatter y x, ///
> by(field, title("Randomly Located Ducks")) ///
> mlab(mylabel) mlabsize(vlarge) ///
> msymbol(none)  ///
> legend(order(1 "ğŸ¦† Duck")) ///
> scheme(sj)
</pre>
<pre class='stata'>. graph export ducks.png, width(1000) replace
(file ducks.png written in PNG format)
</pre>
<figure>
<img src="ducks.png" alt="Randomly Located Ducks" style="width:50.0%" /><figcaption>Randomly Located Ducks</figcaption>
</figure>
</body>
</html>
