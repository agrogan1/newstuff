<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Andy Grogan-Kaylor" />
  <title>Causal Modeling With GSS Data Using Multiple Approaches</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
    href="https://www.w3.org/Talks/Tools/Slidy2/styles/slidy.css" />
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
   href="UMslidy.css" />
  <script src="https://www.w3.org/Talks/Tools/Slidy2/scripts/slidy.js"
    charset="utf-8" type="text/javascript"></script>
	<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Causal Modeling With GSS Data Using Multiple Approaches</h1>
  <p class="author">
Andy Grogan-Kaylor
  </p>
</div>
<div class="slide section level2">

<p>Andy Grogan-Kaylor</p>
<p>24 Nov 2020 08:22:27</p>
</div>
<div id="research-question" class="title-slide slide section level1"><h1>Research Question</h1><blockquote>
<p>What is the <em>possibly causal</em> association of <em>education</em> with <em>job satisfaction</em>, while accounting for factors that may possibly have an association with <em>level of education</em>?</p>
</blockquote></div>
<div id="causality" class="title-slide slide section level1"><h1>Causality</h1><p>A variable <span class="math inline">\(x\)</span> can only be considered to have <em>causal</em> association with <span class="math inline">\(y\)</span> if the following conditions are met (Holland, 1986):</p>
<ol class="incremental" style="list-style-type: decimal">
<li><span class="math inline">\(x\)</span> is correlated with <span class="math inline">\(y\)</span>.</li>
<li><span class="math inline">\(x\)</span> precedes <span class="math inline">\(y\)</span> in time order.</li>
<li>The association between <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> can not be accounted for by any third variable <span class="math inline">\(z\)</span>.</li>
</ol>
<p>Hence, for this particular data, we are exploring:</p>
<blockquote>
<p>What happens to the association of <em>education</em> and <em>job satisfaction</em> when we control for possible confounding variables <span class="math inline">\(z\)</span> using various statistical strategies?</p>
</blockquote></div>
<div id="to-be-added-to-each-analysis" class="title-slide slide section level1"><h1><em>To Be Added To Each Analysis</em></h1><ul class="incremental">
<li>Assumptions</li>
<li>Equation</li>
<li>Stata Command</li>
<li>Conclusion</li>
</ul></div>
<div id="setup" class="title-slide slide section level1"><h1>Setup</h1><div class="sourceCode" id="cb1"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb1-1"><a href="#cb1-1"></a>. <span class="kw">clear</span> <span class="ot">all</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb2-1"><a href="#cb2-1"></a>. cd <span class="st">&quot;/Users/agrogan/Desktop/newstuff/causal-modeling&quot;</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>/Users/agrogan/Desktop/newstuff/causal-modeling</span></code></pre></div></div><div id="get-data" class="slide section level2">
<h1>Get Data</h1>
<div class="sourceCode" id="cb3"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb3-1"><a href="#cb3-1"></a>. <span class="kw">use</span> <span class="st">&quot;GSS_panel2010w123_R6 - stata.dta&quot;</span>, <span class="kw">clear</span></span></code></pre></div>
</div><div id="id-variable" class="slide section level2">
<h1>ID Variable</h1>
<div class="sourceCode" id="cb4"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb4-1"><a href="#cb4-1"></a>. <span class="kw">generate</span> ID = id_1</span></code></pre></div>
</div><div id="keep-only-relevant-variables" class="slide section level2">
<h1>Keep Only Relevant Variables</h1>
<div class="sourceCode" id="cb5"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb5-1"><a href="#cb5-1"></a>. <span class="kw">keep</span> ID satjob_? educ_? race_? incom16_?</span></code></pre></div>
</div><div id="describe-data" class="slide section level2">
<h1>Describe Data</h1>
<div class="sourceCode" id="cb6"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb6-1"><a href="#cb6-1"></a>. <span class="kw">describe</span></span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a>Contains <span class="kw">data</span> from GSS_panel2010w123_R6 - stata.dta</span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="kw">obs</span>:         2,044                          </span>
<span id="cb6-5"><a href="#cb6-5"></a> vars:            13                          5 Jul 2020 13:27</span>
<span id="cb6-6"><a href="#cb6-6"></a> <span class="kw">size</span>:        32,704                          </span>
<span id="cb6-7"><a href="#cb6-7"></a>──────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb6-8"><a href="#cb6-8"></a>              storage   <span class="kw">display</span>    <span class="ot">value</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="kw">variable</span> <span class="bn">name</span>   <span class="dv">type</span>    <span class="kw">format</span>     <span class="kw">label</span>      <span class="kw">variable</span> <span class="kw">label</span></span>
<span id="cb6-10"><a href="#cb6-10"></a>──────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb6-11"><a href="#cb6-11"></a>educ_1          <span class="kw">byte</span>    %8.0g      EDUC_1     educ_1: HIGHEST YEAR OF SCHOOL COMPLETED</span>
<span id="cb6-12"><a href="#cb6-12"></a>educ_2          <span class="kw">byte</span>    %8.0g      EDUC_2     educ_2: HIGHEST YEAR OF SCHOOL COMPLETED</span>
<span id="cb6-13"><a href="#cb6-13"></a>educ_3          <span class="kw">byte</span>    %8.0g      EDUC_3     educ_3: HIGHEST YEAR OF SCHOOL COMPLETED</span>
<span id="cb6-14"><a href="#cb6-14"></a>incom16_1       <span class="kw">byte</span>    %8.0g      INCOM16    incom16_1: RS FAMILY INCOME WHEN 16 YRS OLD</span>
<span id="cb6-15"><a href="#cb6-15"></a>incom16_2       <span class="kw">byte</span>    %8.0g      V1318_A    incom16_2: RS FAMILY INCOME WHEN 16 YRS OLD</span>
<span id="cb6-16"><a href="#cb6-16"></a>incom16_3       <span class="kw">byte</span>    %8.0g      V1319_A    incom16_3: RS FAMILY INCOME WHEN 16 YRS OLD</span>
<span id="cb6-17"><a href="#cb6-17"></a>race_1          <span class="kw">byte</span>    %8.0g      RACE_1     race_1: RACE OF RESPONDENT</span>
<span id="cb6-18"><a href="#cb6-18"></a>race_2          <span class="kw">byte</span>    %8.0g      RACE_2     race_2: RACE OF RESPONDENT</span>
<span id="cb6-19"><a href="#cb6-19"></a>race_3          <span class="kw">byte</span>    %8.0g      RACE_3     race_3: RACE OF RESPONDENT</span>
<span id="cb6-20"><a href="#cb6-20"></a>satjob_1        <span class="kw">byte</span>    %8.0g      SATJOB_1   satjob_1: JOB OR HOUSEWORK</span>
<span id="cb6-21"><a href="#cb6-21"></a>satjob_2        <span class="kw">byte</span>    %8.0g      SATJOB_2   satjob_2: JOB OR HOUSEWORK</span>
<span id="cb6-22"><a href="#cb6-22"></a>satjob_3        <span class="kw">byte</span>    %8.0g      SATJOB_3   satjob_3: JOB OR HOUSEWORK</span>
<span id="cb6-23"><a href="#cb6-23"></a>ID              <span class="kw">float</span>   %9.0g                 </span>
<span id="cb6-24"><a href="#cb6-24"></a>──────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb6-25"><a href="#cb6-25"></a>Sorted <span class="kw">by</span>: </span>
<span id="cb6-26"><a href="#cb6-26"></a>     Note: Dataset has changed since <span class="fu">last</span> saved.</span></code></pre></div>
</div><div id="codebook-for-selected-variables" class="slide section level2">
<h1>Codebook For Selected Variable(s)</h1>
<div class="sourceCode" id="cb7"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb7-1"><a href="#cb7-1"></a>. <span class="kw">codebook</span> satjob_3</span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a>──────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb7-4"><a href="#cb7-4"></a>satjob_3                                                                satjob_3: JOB OR HOUSEWORK</span>
<span id="cb7-5"><a href="#cb7-5"></a>──────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb7-6"><a href="#cb7-6"></a></span>
<span id="cb7-7"><a href="#cb7-7"></a>                  <span class="dv">type</span>:  <span class="kw">numeric</span> (<span class="kw">byte</span>)</span>
<span id="cb7-8"><a href="#cb7-8"></a>                 <span class="kw">label</span>:  SATJOB_3</span>
<span id="cb7-9"><a href="#cb7-9"></a></span>
<span id="cb7-10"><a href="#cb7-10"></a>                 <span class="kw">range</span>:  [1,4]                        units:  1</span>
<span id="cb7-11"><a href="#cb7-11"></a>         <span class="kw">unique</span> <span class="kw">values</span>:  4                        <span class="fu">missing</span> .:  0/2,044</span>
<span id="cb7-12"><a href="#cb7-12"></a>       <span class="kw">unique</span> mv codes:  3                       <span class="fu">missing</span> .*:  1,086/2,044</span>
<span id="cb7-13"><a href="#cb7-13"></a></span>
<span id="cb7-14"><a href="#cb7-14"></a>            tabulation:  Freq.   Numeric  Label</span>
<span id="cb7-15"><a href="#cb7-15"></a>                           483         1  VERY SATISFIED</span>
<span id="cb7-16"><a href="#cb7-16"></a>                           367         2  MOD. SATISFIED</span>
<span id="cb7-17"><a href="#cb7-17"></a>                            69         3  A LITTLE DISSAT</span>
<span id="cb7-18"><a href="#cb7-18"></a>                            39         4  VERY DISSATISFIED</span>
<span id="cb7-19"><a href="#cb7-19"></a>                             4        .<span class="kw">d</span>  DK</span>
<span id="cb7-20"><a href="#cb7-20"></a>                         1,073        .i  IAP</span>
<span id="cb7-21"><a href="#cb7-21"></a>                             9        .n  NA</span></code></pre></div>
</div>
<div id="analyses-relying-on-wide-data" class="title-slide slide section level1"><h1>Analyses Relying On Wide Data</h1></div><div id="correlation" class="slide section level2">
<h1>Correlation</h1>
<div class="sourceCode" id="cb8"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb8-1"><a href="#cb8-1"></a>. <span class="kw">pwcorr</span> satjob_3 educ_3, sig</span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a>             │ satjob_3   educ_3</span>
<span id="cb8-4"><a href="#cb8-4"></a>─────────────┼──────────────────</span>
<span id="cb8-5"><a href="#cb8-5"></a>    satjob_3 │   1.0000 </span>
<span id="cb8-6"><a href="#cb8-6"></a>             │</span>
<span id="cb8-7"><a href="#cb8-7"></a>             │</span>
<span id="cb8-8"><a href="#cb8-8"></a>      educ_3 │  -0.0774   1.0000 </span>
<span id="cb8-9"><a href="#cb8-9"></a>             │   0.0166</span>
<span id="cb8-10"><a href="#cb8-10"></a>             │</span></code></pre></div>
</div><div id="regression-with-1-independent-variable" class="slide section level2">
<h1>Regression With 1 Independent Variable</h1>
<div class="sourceCode" id="cb9"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb9-1"><a href="#cb9-1"></a>. <span class="kw">regress</span> satjob_3 educ_3</span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a>      Source │       SS           df       MS      Number <span class="kw">of</span> <span class="kw">obs</span>   =       957</span>
<span id="cb9-4"><a href="#cb9-4"></a>─────────────┼──────────────────────────────────   <span class="fu">F</span>(1, 955)       =      5.76</span>
<span id="cb9-5"><a href="#cb9-5"></a>       Model │  3.53828635         1  3.53828635   Prob &gt; <span class="fu">F</span>        =    0.0166</span>
<span id="cb9-6"><a href="#cb9-6"></a>    Residual │  586.493062       955   .61412886   R-squared       =    0.0060</span>
<span id="cb9-7"><a href="#cb9-7"></a>─────────────┼──────────────────────────────────   Adj R-squared   =    0.0050</span>
<span id="cb9-8"><a href="#cb9-8"></a>       Total │  590.031348       956  .617187602   Root MSE        =    .78366</span>
<span id="cb9-9"><a href="#cb9-9"></a></span>
<span id="cb9-10"><a href="#cb9-10"></a>─────────────┬────────────────────────────────────────────────────────────────</span>
<span id="cb9-11"><a href="#cb9-11"></a>    satjob_3 │      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb9-12"><a href="#cb9-12"></a>─────────────┼────────────────────────────────────────────────────────────────</span>
<span id="cb9-13"><a href="#cb9-13"></a>      educ_3 │  -.0216864   .0090349    -2.40   0.017    -.0394169    -.003956</span>
<span id="cb9-14"><a href="#cb9-14"></a>       <span class="dt">_cons</span> │   1.954439   .1297867    15.06   0.000     1.699739    2.209139</span>
<span id="cb9-15"><a href="#cb9-15"></a>─────────────┴────────────────────────────────────────────────────────────────</span></code></pre></div>
</div><div id="regression-with-multiple-independent-variables" class="slide section level2">
<h1>Regression With Multiple Independent Variables</h1>
<div class="sourceCode" id="cb10"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb10-1"><a href="#cb10-1"></a>. <span class="kw">regress</span> satjob_3 educ_3 i.race_3 incom16_3 </span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a>      Source │       SS           df       MS      Number <span class="kw">of</span> <span class="kw">obs</span>   =       951</span>
<span id="cb10-4"><a href="#cb10-4"></a>─────────────┼──────────────────────────────────   <span class="fu">F</span>(4, 946)       =      2.36</span>
<span id="cb10-5"><a href="#cb10-5"></a>       Model │  5.81703392         4  1.45425848   Prob &gt; <span class="fu">F</span>        =    0.0517</span>
<span id="cb10-6"><a href="#cb10-6"></a>    Residual │  582.580442       946  .615835563   R-squared       =    0.0099</span>
<span id="cb10-7"><a href="#cb10-7"></a>─────────────┼──────────────────────────────────   Adj R-squared   =    0.0057</span>
<span id="cb10-8"><a href="#cb10-8"></a>       Total │  588.397476       950  .619365765   Root MSE        =    .78475</span>
<span id="cb10-9"><a href="#cb10-9"></a></span>
<span id="cb10-10"><a href="#cb10-10"></a>─────────────┬────────────────────────────────────────────────────────────────</span>
<span id="cb10-11"><a href="#cb10-11"></a>    satjob_3 │      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb10-12"><a href="#cb10-12"></a>─────────────┼────────────────────────────────────────────────────────────────</span>
<span id="cb10-13"><a href="#cb10-13"></a>      educ_3 │  -.0215151   .0092674    -2.32   0.020    -.0397021   -.0033281</span>
<span id="cb10-14"><a href="#cb10-14"></a>             │</span>
<span id="cb10-15"><a href="#cb10-15"></a>      race_3 │</span>
<span id="cb10-16"><a href="#cb10-16"></a>      <span class="bn">black</span>  │   .1267666   .0708898     1.79   0.074    -.0123528    .2658861</span>
<span id="cb10-17"><a href="#cb10-17"></a>      other  │   .0677238   .0985112     0.69   0.492    -.1256019    .2610495</span>
<span id="cb10-18"><a href="#cb10-18"></a>             │</span>
<span id="cb10-19"><a href="#cb10-19"></a>   incom16_3 │   .0115275   .0280601     0.41   0.681    -.0435398    .0665947</span>
<span id="cb10-20"><a href="#cb10-20"></a>       <span class="dt">_cons</span> │    1.89556    .144649    13.10   0.000      1.61169     2.17943</span>
<span id="cb10-21"><a href="#cb10-21"></a>─────────────┴────────────────────────────────────────────────────────────────</span></code></pre></div>
</div><div id="propensity-score" class="slide section level2">
<h1>Propensity Score</h1>
<h3 id="data-wrangling-since-propensity-score-requires-a-binary-treatment-variable">Data Wrangling Since Propensity Score Requires a Binary Treatment Variable</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb11-1"><a href="#cb11-1"></a>. <span class="kw">generate</span> twelve_years_3 = educ_3 &gt;= 12 <span class="co">// 12 or more years of education</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb12-1"><a href="#cb12-1"></a>. <span class="kw">generate</span> twelve_years_2 = educ_2 &gt;= 12 <span class="co">// 12 or more years of education</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb13-1"><a href="#cb13-1"></a>. <span class="kw">generate</span> twelve_years_1 = educ_1 &gt;= 12 <span class="co">// 12 or more years of education</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb14-1"><a href="#cb14-1"></a>. <span class="kw">label</span> <span class="kw">variable</span> twelve_years_3 <span class="st">&quot;12 or more years of education&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb15-1"><a href="#cb15-1"></a>. <span class="kw">label</span> <span class="kw">variable</span> twelve_years_2 <span class="st">&quot;12 or more years of education&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb16-1"><a href="#cb16-1"></a>. <span class="kw">label</span> <span class="kw">variable</span> twelve_years_1 <span class="st">&quot;12 or more years of education&quot;</span></span></code></pre></div>
<h3 id="propensity-score-analysis">Propensity Score Analysis</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb17-1"><a href="#cb17-1"></a>. teffects psmatch (satjob_3) (twelve_years_3 incom16_3 i.race_3)</span>
<span id="cb17-2"><a href="#cb17-2"></a></span>
<span id="cb17-3"><a href="#cb17-3"></a>Treatment-<span class="kw">effects</span> estimation                   Number <span class="kw">of</span> <span class="kw">obs</span>      =        952</span>
<span id="cb17-4"><a href="#cb17-4"></a>Estimator      : propensity-<span class="kw">score</span> matching     Matches: requested =          1</span>
<span id="cb17-5"><a href="#cb17-5"></a>Outcome <span class="kw">model</span>  : matching                                     <span class="fu">min</span> =          1</span>
<span id="cb17-6"><a href="#cb17-6"></a>Treatment <span class="kw">model</span>: <span class="kw">logit</span>                                        <span class="fu">max</span> =        296</span>
<span id="cb17-7"><a href="#cb17-7"></a>───────────────┬────────────────────────────────────────────────────────────────</span>
<span id="cb17-8"><a href="#cb17-8"></a>               │              AI Robust</span>
<span id="cb17-9"><a href="#cb17-9"></a>      satjob_3 │      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]</span>
<span id="cb17-10"><a href="#cb17-10"></a>───────────────┼────────────────────────────────────────────────────────────────</span>
<span id="cb17-11"><a href="#cb17-11"></a>ATE            │</span>
<span id="cb17-12"><a href="#cb17-12"></a>twelve_years_3 │</span>
<span id="cb17-13"><a href="#cb17-13"></a>     (1 vs 0)  │  -.0410168   .1083808    -0.38   0.705    -.2534393    .1714057</span>
<span id="cb17-14"><a href="#cb17-14"></a>───────────────┴────────────────────────────────────────────────────────────────</span></code></pre></div>
<h3 id="assess-balance-of-propensity-score-model-cuartas">Assess Balance of Propensity Score Model <a href="#fn1" id="fnref1" class="footnote-ref"><sup>1</sup></a></h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb18-1"><a href="#cb18-1"></a>. tebalance <span class="kw">summarize</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="kw">note</span>: refitting the <span class="kw">model</span> <span class="kw">using</span> the <span class="kw">generate</span>() option</span>
<span id="cb18-3"><a href="#cb18-3"></a></span>
<span id="cb18-4"><a href="#cb18-4"></a>  Covariate balance summary</span>
<span id="cb18-5"><a href="#cb18-5"></a>                                                   Raw      Matched</span>
<span id="cb18-6"><a href="#cb18-6"></a>                          ─────────────────────────────────────────</span>
<span id="cb18-7"><a href="#cb18-7"></a>                          Number <span class="kw">of</span> <span class="kw">obs</span> =          952        1,904</span>
<span id="cb18-8"><a href="#cb18-8"></a>                          Treated <span class="kw">obs</span>   =          854          952</span>
<span id="cb18-9"><a href="#cb18-9"></a>                          Control <span class="kw">obs</span>   =           98          952</span>
<span id="cb18-10"><a href="#cb18-10"></a>                          ─────────────────────────────────────────</span>
<span id="cb18-11"><a href="#cb18-11"></a></span>
<span id="cb18-12"><a href="#cb18-12"></a>  ────────────────┬────────────────────────────────────────────────</span>
<span id="cb18-13"><a href="#cb18-13"></a>                  │Standardized differences          Variance <span class="kw">ratio</span></span>
<span id="cb18-14"><a href="#cb18-14"></a>                  │        Raw     Matched           Raw    Matched</span>
<span id="cb18-15"><a href="#cb18-15"></a>  ────────────────┼────────────────────────────────────────────────</span>
<span id="cb18-16"><a href="#cb18-16"></a>        incom16_3 │   .5429864   -.0077616      .9418824   .9726307</span>
<span id="cb18-17"><a href="#cb18-17"></a>                  │</span>
<span id="cb18-18"><a href="#cb18-18"></a>           race_3 │</span>
<span id="cb18-19"><a href="#cb18-19"></a>           <span class="bn">black</span>  │  -.1354119   -.0199848      .7873145   .9638265</span>
<span id="cb18-20"><a href="#cb18-20"></a>           other  │  -.0248378    .0326166      .9163586   1.114865</span>
<span id="cb18-21"><a href="#cb18-21"></a>  ────────────────┴────────────────────────────────────────────────</span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb19-1"><a href="#cb19-1"></a>. tebalance density, <span class="dv">scheme</span>(michigan)</span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="kw">note</span>: refitting the <span class="kw">model</span> <span class="kw">using</span> the <span class="kw">generate</span>() option</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb20-1"><a href="#cb20-1"></a>. <span class="kw">graph</span> <span class="kw">export</span> mydensity.png, <span class="kw">width</span>(500) <span class="kw">replace</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>(file mydensity.png written <span class="kw">in</span> PNG <span class="kw">format</span>)</span></code></pre></div>
<div class="figure">
<img src="mydensity.png" alt="" />
<p class="caption">Density Plot of Propensity Score</p>
</div>
</div><div id="cross-lagged-regression" class="slide section level2">
<h1>Cross Lagged Regression</h1>
<div class="sourceCode" id="cb21"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb21-1"><a href="#cb21-1"></a>. sem (satjob_3 &lt;- twelve_years_2 incom16_2) <span class="co">///</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>&gt; (twelve_years_3 &lt;- satjob_2 incom16_2), <span class="co">///</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>&gt; cov(<span class="fu">e</span>.satjob_3*<span class="fu">e</span>.twelve_years_3)</span>
<span id="cb21-4"><a href="#cb21-4"></a>(1164 observations with <span class="fu">missing</span> <span class="kw">values</span> excluded)</span>
<span id="cb21-5"><a href="#cb21-5"></a></span>
<span id="cb21-6"><a href="#cb21-6"></a>Endogenous variables</span>
<span id="cb21-7"><a href="#cb21-7"></a></span>
<span id="cb21-8"><a href="#cb21-8"></a>Observed:  satjob_3 twelve_years_3</span>
<span id="cb21-9"><a href="#cb21-9"></a></span>
<span id="cb21-10"><a href="#cb21-10"></a>Exogenous variables</span>
<span id="cb21-11"><a href="#cb21-11"></a></span>
<span id="cb21-12"><a href="#cb21-12"></a>Observed:  twelve_years_2 incom16_2 satjob_2</span>
<span id="cb21-13"><a href="#cb21-13"></a></span>
<span id="cb21-14"><a href="#cb21-14"></a>Fitting target <span class="kw">model</span>:</span>
<span id="cb21-15"><a href="#cb21-15"></a></span>
<span id="cb21-16"><a href="#cb21-16"></a>Iteration 0:   <span class="fu">log</span> likelihood =  -3673.669  </span>
<span id="cb21-17"><a href="#cb21-17"></a>Iteration 1:   <span class="fu">log</span> likelihood = -3673.4349  </span>
<span id="cb21-18"><a href="#cb21-18"></a>Iteration 2:   <span class="fu">log</span> likelihood = -3673.4342  </span>
<span id="cb21-19"><a href="#cb21-19"></a>Iteration 3:   <span class="fu">log</span> likelihood = -3673.4342  </span>
<span id="cb21-20"><a href="#cb21-20"></a></span>
<span id="cb21-21"><a href="#cb21-21"></a>Structural equation <span class="kw">model</span>                       Number <span class="kw">of</span> <span class="kw">obs</span>     =        880</span>
<span id="cb21-22"><a href="#cb21-22"></a>Estimation method  = <span class="kw">ml</span></span>
<span id="cb21-23"><a href="#cb21-23"></a>Log likelihood     = -3673.4342</span>
<span id="cb21-24"><a href="#cb21-24"></a></span>
<span id="cb21-25"><a href="#cb21-25"></a>────────────────────────────────┬────────────────────────────────────────────────────────────────</span>
<span id="cb21-26"><a href="#cb21-26"></a>                                │                 OIM</span>
<span id="cb21-27"><a href="#cb21-27"></a>                                │      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]</span>
<span id="cb21-28"><a href="#cb21-28"></a>────────────────────────────────┼────────────────────────────────────────────────────────────────</span>
<span id="cb21-29"><a href="#cb21-29"></a>Structural                      │</span>
<span id="cb21-30"><a href="#cb21-30"></a>  satjob_3                      │</span>
<span id="cb21-31"><a href="#cb21-31"></a>                 twelve_years_2 │  -.0722619   .1575751    -0.46   0.647    -.3811034    .2365795</span>
<span id="cb21-32"><a href="#cb21-32"></a>                      incom16_2 │  -.0024625   .0304497    -0.08   0.936    -.0621428    .0572177</span>
<span id="cb21-33"><a href="#cb21-33"></a>                          <span class="dt">_cons</span> │   1.734644   .1378498    12.58   0.000     1.464464    2.004825</span>
<span id="cb21-34"><a href="#cb21-34"></a>  ──────────────────────────────┼────────────────────────────────────────────────────────────────</span>
<span id="cb21-35"><a href="#cb21-35"></a>  twelve_years_3                │</span>
<span id="cb21-36"><a href="#cb21-36"></a>                      incom16_2 │   .0607781   .0108369     5.61   0.000     .0395381    .0820181</span>
<span id="cb21-37"><a href="#cb21-37"></a>                       satjob_2 │  -.0054737   .0149476    -0.37   0.714    -.0347704    .0238231</span>
<span id="cb21-38"><a href="#cb21-38"></a>                          <span class="dt">_cons</span> │   .7396908   .0427695    17.29   0.000     .6558642    .8235175</span>
<span id="cb21-39"><a href="#cb21-39"></a>────────────────────────────────┼────────────────────────────────────────────────────────────────</span>
<span id="cb21-40"><a href="#cb21-40"></a>                 <span class="kw">var</span>(<span class="fu">e</span>.satjob_3)│   .6046871   .0288304                      .5507404    .6639181</span>
<span id="cb21-41"><a href="#cb21-41"></a>           <span class="kw">var</span>(<span class="fu">e</span>.twelve_years_3)│   .0868092   .0041385                      .0790653    .0953116</span>
<span id="cb21-42"><a href="#cb21-42"></a>────────────────────────────────┼────────────────────────────────────────────────────────────────</span>
<span id="cb21-43"><a href="#cb21-43"></a>cov(<span class="fu">e</span>.satjob_3,<span class="fu">e</span>.twelve_years_3)│   .0016217   .0154575     0.10   0.916    -.0286744    .0319178</span>
<span id="cb21-44"><a href="#cb21-44"></a>────────────────────────────────┴────────────────────────────────────────────────────────────────</span>
<span id="cb21-45"><a href="#cb21-45"></a>LR <span class="kw">test</span> <span class="kw">of</span> <span class="kw">model</span> vs. saturated: <span class="fu">chi2</span>(2)   =    968.48, Prob &gt; <span class="fu">chi2</span> = 0.0000</span></code></pre></div>
</div>
<div id="analyses-relying-on-long-data" class="title-slide slide section level1"><h1>Analyses Relying On Long Data</h1></div><div id="reshape-the-data" class="slide section level2">
<h1>Reshape The Data</h1>
<div class="sourceCode" id="cb22"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb22-1"><a href="#cb22-1"></a>. <span class="kw">reshape</span> <span class="kw">long</span> satjob_ educ_ twelve_years_ incom16_ race_, i(ID) j(wave)</span>
<span id="cb22-2"><a href="#cb22-2"></a>(<span class="kw">note</span>: j = 1 2 3)</span>
<span id="cb22-3"><a href="#cb22-3"></a></span>
<span id="cb22-4"><a href="#cb22-4"></a>Data                               <span class="kw">wide</span>   -&gt;   <span class="kw">long</span></span>
<span id="cb22-5"><a href="#cb22-5"></a>─────────────────────────────────────────────────────────────────────────────</span>
<span id="cb22-6"><a href="#cb22-6"></a>Number <span class="kw">of</span> <span class="kw">obs</span>.                     2044   -&gt;    6132</span>
<span id="cb22-7"><a href="#cb22-7"></a>Number <span class="kw">of</span> variables                  16   -&gt;       7</span>
<span id="cb22-8"><a href="#cb22-8"></a>j <span class="kw">variable</span> (3 <span class="kw">values</span>)                     -&gt;   wave</span>
<span id="cb22-9"><a href="#cb22-9"></a>xij variables:</span>
<span id="cb22-10"><a href="#cb22-10"></a>             satjob_1 satjob_2 satjob_3   -&gt;   satjob_</span>
<span id="cb22-11"><a href="#cb22-11"></a>                   educ_1 educ_2 educ_3   -&gt;   educ_</span>
<span id="cb22-12"><a href="#cb22-12"></a>twelve_years_1 twelve_years_2 twelve_years_3-&gt; twelve_years_</span>
<span id="cb22-13"><a href="#cb22-13"></a>          incom16_1 incom16_2 incom16_3   -&gt;   incom16_</span>
<span id="cb22-14"><a href="#cb22-14"></a>                   race_1 race_2 race_3   -&gt;   race_</span>
<span id="cb22-15"><a href="#cb22-15"></a>─────────────────────────────────────────────────────────────────────────────</span></code></pre></div>
</div><div id="clean-up-variable-names" class="slide section level2">
<h1>Clean Up Variable Names</h1>
<div class="sourceCode" id="cb23"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb23-1"><a href="#cb23-1"></a>. <span class="kw">rename</span> satjob_ satjob</span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb24-1"><a href="#cb24-1"></a>. <span class="kw">rename</span> educ_ educ</span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb25-1"><a href="#cb25-1"></a>. <span class="kw">rename</span> incom16_ incom16</span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb26-1"><a href="#cb26-1"></a>. <span class="kw">rename</span> race_ race</span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb27-1"><a href="#cb27-1"></a>. <span class="kw">rename</span> twelve_years_ twelve_years</span></code></pre></div>
</div><div id="multilevel-model" class="slide section level2">
<h1>Multilevel Model</h1>
<div class="sourceCode" id="cb28"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb28-1"><a href="#cb28-1"></a>. mixed satjob wave educ incom16 i.race || ID: </span>
<span id="cb28-2"><a href="#cb28-2"></a></span>
<span id="cb28-3"><a href="#cb28-3"></a>Performing EM optimization: </span>
<span id="cb28-4"><a href="#cb28-4"></a></span>
<span id="cb28-5"><a href="#cb28-5"></a>Performing <span class="kw">gradient</span>-based optimization: </span>
<span id="cb28-6"><a href="#cb28-6"></a></span>
<span id="cb28-7"><a href="#cb28-7"></a>Iteration 0:   <span class="fu">log</span> likelihood =  -4161.775  </span>
<span id="cb28-8"><a href="#cb28-8"></a>Iteration 1:   <span class="fu">log</span> likelihood = -4161.7476  </span>
<span id="cb28-9"><a href="#cb28-9"></a>Iteration 2:   <span class="fu">log</span> likelihood = -4161.7476  </span>
<span id="cb28-10"><a href="#cb28-10"></a></span>
<span id="cb28-11"><a href="#cb28-11"></a>Computing standard errors:</span>
<span id="cb28-12"><a href="#cb28-12"></a></span>
<span id="cb28-13"><a href="#cb28-13"></a>Mixed-<span class="kw">effects</span> ML regression                     Number <span class="kw">of</span> <span class="kw">obs</span>     =      3,595</span>
<span id="cb28-14"><a href="#cb28-14"></a>Group <span class="kw">variable</span>: ID                              Number <span class="kw">of</span> groups  =      1,661</span>
<span id="cb28-15"><a href="#cb28-15"></a></span>
<span id="cb28-16"><a href="#cb28-16"></a>                                                Obs per <span class="fu">group</span>:</span>
<span id="cb28-17"><a href="#cb28-17"></a>                                                              <span class="fu">min</span> =          1</span>
<span id="cb28-18"><a href="#cb28-18"></a>                                                              avg =        2.2</span>
<span id="cb28-19"><a href="#cb28-19"></a>                                                              <span class="fu">max</span> =          3</span>
<span id="cb28-20"><a href="#cb28-20"></a></span>
<span id="cb28-21"><a href="#cb28-21"></a>                                                Wald <span class="fu">chi2</span>(5)      =      42.38</span>
<span id="cb28-22"><a href="#cb28-22"></a>Log likelihood = -4161.7476                     Prob &gt; <span class="fu">chi2</span>       =     0.0000</span>
<span id="cb28-23"><a href="#cb28-23"></a></span>
<span id="cb28-24"><a href="#cb28-24"></a>─────────────┬────────────────────────────────────────────────────────────────</span>
<span id="cb28-25"><a href="#cb28-25"></a>      satjob │      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]</span>
<span id="cb28-26"><a href="#cb28-26"></a>─────────────┼────────────────────────────────────────────────────────────────</span>
<span id="cb28-27"><a href="#cb28-27"></a>        wave │   -.018625    .014015    -1.33   0.184    -.0460938    .0088439</span>
<span id="cb28-28"><a href="#cb28-28"></a>        educ │   -.018976   .0054133    -3.51   0.000    -.0295859    -.008366</span>
<span id="cb28-29"><a href="#cb28-29"></a>     incom16 │  -.0350535   .0154559    -2.27   0.023    -.0653465   -.0047606</span>
<span id="cb28-30"><a href="#cb28-30"></a>             │</span>
<span id="cb28-31"><a href="#cb28-31"></a>        race │</span>
<span id="cb28-32"><a href="#cb28-32"></a>      <span class="bn">black</span>  │   .1695589   .0451171     3.76   0.000     .0811311    .2579868</span>
<span id="cb28-33"><a href="#cb28-33"></a>      other  │    .035975   .0543135     0.66   0.508    -.0704776    .1424276</span>
<span id="cb28-34"><a href="#cb28-34"></a>             │</span>
<span id="cb28-35"><a href="#cb28-35"></a>       <span class="dt">_cons</span> │   2.049073   .0843019    24.31   0.000     1.883845    2.214302</span>
<span id="cb28-36"><a href="#cb28-36"></a>─────────────┴────────────────────────────────────────────────────────────────</span>
<span id="cb28-37"><a href="#cb28-37"></a></span>
<span id="cb28-38"><a href="#cb28-38"></a>─────────────────────────────┬────────────────────────────────────────────────</span>
<span id="cb28-39"><a href="#cb28-39"></a>  Random-<span class="kw">effects</span> Parameters  │   Estimate   Std. Err.     [95% Conf. Interval]</span>
<span id="cb28-40"><a href="#cb28-40"></a>─────────────────────────────┼────────────────────────────────────────────────</span>
<span id="cb28-41"><a href="#cb28-41"></a>ID: Identity                 │</span>
<span id="cb28-42"><a href="#cb28-42"></a>                  <span class="kw">var</span>(<span class="dt">_cons</span>) │   .2305185   .0161162      .2009999    .2643722</span>
<span id="cb28-43"><a href="#cb28-43"></a>─────────────────────────────┼────────────────────────────────────────────────</span>
<span id="cb28-44"><a href="#cb28-44"></a>               <span class="kw">var</span>(Residual) │   .4174209   .0131143      .3924927    .4439323</span>
<span id="cb28-45"><a href="#cb28-45"></a>─────────────────────────────┴────────────────────────────────────────────────</span>
<span id="cb28-46"><a href="#cb28-46"></a>LR <span class="kw">test</span> vs. linear <span class="kw">model</span>: chibar2(01) = 322.95        Prob &gt;= chibar2 = 0.0000</span></code></pre></div>
</div><div id="fixed-effects-regression" class="slide section level2">
<h1>Fixed effects regression</h1>
<div class="sourceCode" id="cb29"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb29-1"><a href="#cb29-1"></a>. <span class="kw">xtreg</span> satjob wave educ incom16 i.race, i(ID) <span class="kw">fe</span></span>
<span id="cb29-2"><a href="#cb29-2"></a></span>
<span id="cb29-3"><a href="#cb29-3"></a>Fixed-<span class="kw">effects</span> (within) regression               Number <span class="kw">of</span> <span class="kw">obs</span>     =      3,595</span>
<span id="cb29-4"><a href="#cb29-4"></a>Group <span class="kw">variable</span>: ID                              Number <span class="kw">of</span> groups  =      1,661</span>
<span id="cb29-5"><a href="#cb29-5"></a></span>
<span id="cb29-6"><a href="#cb29-6"></a>R-sq:                                           Obs per <span class="fu">group</span>:</span>
<span id="cb29-7"><a href="#cb29-7"></a>     within  = 0.0052                                         <span class="fu">min</span> =          1</span>
<span id="cb29-8"><a href="#cb29-8"></a>     between = 0.0148                                         avg =        2.2</span>
<span id="cb29-9"><a href="#cb29-9"></a>     overall = 0.0122                                         <span class="fu">max</span> =          3</span>
<span id="cb29-10"><a href="#cb29-10"></a></span>
<span id="cb29-11"><a href="#cb29-11"></a>                                                <span class="fu">F</span>(5,1929)         =       2.03</span>
<span id="cb29-12"><a href="#cb29-12"></a><span class="fu">corr</span>(u_i, Xb)  = -0.0714                        Prob &gt; <span class="fu">F</span>          =     0.0711</span>
<span id="cb29-13"><a href="#cb29-13"></a></span>
<span id="cb29-14"><a href="#cb29-14"></a>─────────────┬────────────────────────────────────────────────────────────────</span>
<span id="cb29-15"><a href="#cb29-15"></a>      satjob │      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb29-16"><a href="#cb29-16"></a>─────────────┼────────────────────────────────────────────────────────────────</span>
<span id="cb29-17"><a href="#cb29-17"></a>        wave │  -.0237842   .0152551    -1.56   0.119    -.0537023     .006134</span>
<span id="cb29-18"><a href="#cb29-18"></a>        educ │  -.0087664   .0158008    -0.55   0.579    -.0397548     .022222</span>
<span id="cb29-19"><a href="#cb29-19"></a>     incom16 │   -.047186   .0228265    -2.07   0.039    -.0919531   -.0024189</span>
<span id="cb29-20"><a href="#cb29-20"></a>             │</span>
<span id="cb29-21"><a href="#cb29-21"></a>        race │</span>
<span id="cb29-22"><a href="#cb29-22"></a>      <span class="bn">black</span>  │   .3226033   .2025604     1.59   0.111    -.0746572    .7198637</span>
<span id="cb29-23"><a href="#cb29-23"></a>      other  │   .0383663    .104807     0.37   0.714    -.1671806    .2439132</span>
<span id="cb29-24"><a href="#cb29-24"></a>             │</span>
<span id="cb29-25"><a href="#cb29-25"></a>       <span class="dt">_cons</span> │   1.928458    .227991     8.46   0.000     1.481323    2.375593</span>
<span id="cb29-26"><a href="#cb29-26"></a>─────────────┼────────────────────────────────────────────────────────────────</span>
<span id="cb29-27"><a href="#cb29-27"></a>     sigma_u │   .6861769</span>
<span id="cb29-28"><a href="#cb29-28"></a>     sigma_e │  .64822634</span>
<span id="cb29-29"><a href="#cb29-29"></a>         rho │  .52841711   (fraction <span class="kw">of</span> <span class="kw">variance</span> due to u_i)</span>
<span id="cb29-30"><a href="#cb29-30"></a>─────────────┴────────────────────────────────────────────────────────────────</span>
<span id="cb29-31"><a href="#cb29-31"></a><span class="fu">F</span> <span class="kw">test</span> that <span class="ot">all</span> u_i=0: <span class="fu">F</span>(1660, 1929) = 2.18                  Prob &gt; <span class="fu">F</span> = 0.0000</span></code></pre></div>
</div><div id="hybrid-model" class="slide section level2">
<h1>“Hybrid” Model</h1>
<blockquote>
<p>The contention here is that the <em>between person</em> coefficient replicates the effect of the fixed effects regression coefficient while the <em>within person</em> coefficient is simultaneously estimated.</p>
</blockquote>
<h3 id="generate-within-and-between-variables">Generate Within And Between Variables</h3>
<div class="sourceCode" id="cb30"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb30-1"><a href="#cb30-1"></a>. <span class="kw">bysort</span> ID: <span class="kw">egen</span> educ_mean = <span class="kw">mean</span>(educ)</span>
<span id="cb30-2"><a href="#cb30-2"></a>(6 <span class="fu">missing</span> <span class="kw">values</span> generated)</span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb31-1"><a href="#cb31-1"></a>. <span class="kw">generate</span> educ_deviation = educ - educ_mean</span>
<span id="cb31-2"><a href="#cb31-2"></a>(1,240 <span class="fu">missing</span> <span class="kw">values</span> generated)</span></code></pre></div>
<h3 id="estimate-the-model">Estimate The Model</h3>
<div class="sourceCode" id="cb32"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb32-1"><a href="#cb32-1"></a>. mixed satjob wave educ_mean educ_deviation incom16 i.race || ID:</span>
<span id="cb32-2"><a href="#cb32-2"></a></span>
<span id="cb32-3"><a href="#cb32-3"></a>Performing EM optimization: </span>
<span id="cb32-4"><a href="#cb32-4"></a></span>
<span id="cb32-5"><a href="#cb32-5"></a>Performing <span class="kw">gradient</span>-based optimization: </span>
<span id="cb32-6"><a href="#cb32-6"></a></span>
<span id="cb32-7"><a href="#cb32-7"></a>Iteration 0:   <span class="fu">log</span> likelihood = -4161.3224  </span>
<span id="cb32-8"><a href="#cb32-8"></a>Iteration 1:   <span class="fu">log</span> likelihood = -4161.2951  </span>
<span id="cb32-9"><a href="#cb32-9"></a>Iteration 2:   <span class="fu">log</span> likelihood = -4161.2951  </span>
<span id="cb32-10"><a href="#cb32-10"></a></span>
<span id="cb32-11"><a href="#cb32-11"></a>Computing standard errors:</span>
<span id="cb32-12"><a href="#cb32-12"></a></span>
<span id="cb32-13"><a href="#cb32-13"></a>Mixed-<span class="kw">effects</span> ML regression                     Number <span class="kw">of</span> <span class="kw">obs</span>     =      3,595</span>
<span id="cb32-14"><a href="#cb32-14"></a>Group <span class="kw">variable</span>: ID                              Number <span class="kw">of</span> groups  =      1,661</span>
<span id="cb32-15"><a href="#cb32-15"></a></span>
<span id="cb32-16"><a href="#cb32-16"></a>                                                Obs per <span class="fu">group</span>:</span>
<span id="cb32-17"><a href="#cb32-17"></a>                                                              <span class="fu">min</span> =          1</span>
<span id="cb32-18"><a href="#cb32-18"></a>                                                              avg =        2.2</span>
<span id="cb32-19"><a href="#cb32-19"></a>                                                              <span class="fu">max</span> =          3</span>
<span id="cb32-20"><a href="#cb32-20"></a></span>
<span id="cb32-21"><a href="#cb32-21"></a>                                                Wald <span class="fu">chi2</span>(6)      =      43.30</span>
<span id="cb32-22"><a href="#cb32-22"></a>Log likelihood = -4161.2951                     Prob &gt; <span class="fu">chi2</span>       =     0.0000</span>
<span id="cb32-23"><a href="#cb32-23"></a></span>
<span id="cb32-24"><a href="#cb32-24"></a>───────────────┬────────────────────────────────────────────────────────────────</span>
<span id="cb32-25"><a href="#cb32-25"></a>        satjob │      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]</span>
<span id="cb32-26"><a href="#cb32-26"></a>───────────────┼────────────────────────────────────────────────────────────────</span>
<span id="cb32-27"><a href="#cb32-27"></a>          wave │  -.0197009   .0140588    -1.40   0.161    -.0472556    .0078537</span>
<span id="cb32-28"><a href="#cb32-28"></a>     educ_mean │  -.0208983   .0057775    -3.62   0.000    -.0322221   -.0095745</span>
<span id="cb32-29"><a href="#cb32-29"></a>educ_deviation │  -.0054971   .0151667    -0.36   0.717    -.0352233    .0242292</span>
<span id="cb32-30"><a href="#cb32-30"></a>       incom16 │  -.0343579   .0154712    -2.22   0.026    -.0646809   -.0040349</span>
<span id="cb32-31"><a href="#cb32-31"></a>               │</span>
<span id="cb32-32"><a href="#cb32-32"></a>          race │</span>
<span id="cb32-33"><a href="#cb32-33"></a>        <span class="bn">black</span>  │   .1684699   .0451261     3.73   0.000     .0800245    .2569154</span>
<span id="cb32-34"><a href="#cb32-34"></a>        other  │   .0342568   .0543368     0.63   0.528    -.0722414     .140755</span>
<span id="cb32-35"><a href="#cb32-35"></a>               │</span>
<span id="cb32-36"><a href="#cb32-36"></a>         <span class="dt">_cons</span> │   2.075849    .088866    23.36   0.000     1.901675    2.250023</span>
<span id="cb32-37"><a href="#cb32-37"></a>───────────────┴────────────────────────────────────────────────────────────────</span>
<span id="cb32-38"><a href="#cb32-38"></a></span>
<span id="cb32-39"><a href="#cb32-39"></a>─────────────────────────────┬────────────────────────────────────────────────</span>
<span id="cb32-40"><a href="#cb32-40"></a>  Random-<span class="kw">effects</span> Parameters  │   Estimate   Std. Err.     [95% Conf. Interval]</span>
<span id="cb32-41"><a href="#cb32-41"></a>─────────────────────────────┼────────────────────────────────────────────────</span>
<span id="cb32-42"><a href="#cb32-42"></a>ID: Identity                 │</span>
<span id="cb32-43"><a href="#cb32-43"></a>                  <span class="kw">var</span>(<span class="dt">_cons</span>) │   .2304651   .0161097      .2009581    .2643046</span>
<span id="cb32-44"><a href="#cb32-44"></a>─────────────────────────────┼────────────────────────────────────────────────</span>
<span id="cb32-45"><a href="#cb32-45"></a>               <span class="kw">var</span>(Residual) │   .4173132   .0131099      .3923934    .4438157</span>
<span id="cb32-46"><a href="#cb32-46"></a>─────────────────────────────┴────────────────────────────────────────────────</span>
<span id="cb32-47"><a href="#cb32-47"></a>LR <span class="kw">test</span> vs. linear <span class="kw">model</span>: chibar2(01) = 323.08        Prob &gt;= chibar2 = 0.0000</span></code></pre></div>
</div><div id="difference-in-difference-model" class="slide section level2">
<h1>Difference In Difference Model</h1>
</div>
<div id="combinations-of-models" class="title-slide slide section level1"><h1>Combinations of Models</h1><p>e.g. Difference in difference + propensity scores</p></div>
<div id="references" class="title-slide slide section level1"><h1>References</h1><p>Holland, P. W. (1986). Statistics and Causal Inference. <em>Journal of the American Statistical Association</em>, 81(396), 945–960. https://doi.org/10.1080/01621459.1986.10478354</p>
<div class="section footnotes" role="doc-endnotes">
<hr />
<ol class="incremental">
<li><div id="fn1">
<p>With many thanks to Jorge Cuartas for the ideas for earlier versions of this code.<a href="#fnref1" class="footnote-back">↩︎</a></p>
</div></li>
</ol>
</div></div>
</body>
</html>
